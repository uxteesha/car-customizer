<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Viewer Hotspot Explorer</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the futuristic pink aesthetic */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e; /* Dark Purple/Blue */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* Model Viewer specific styling */
        model-viewer {
            width: 100%;
            height: 80vh;
            max-width: 1200px;
            --poster-color: #1a1a2e;
            --controls-color: #ff007f;
            --controls-height: 40px;
        }

        /* Hotspot Button Styling */
        .hotspot-button {
            background-color: #ff007f; /* Fuchsia */
            border: 2px solid white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            padding: 0;
            cursor: pointer;
            box-shadow: 0 0 10px #ff007f;
            transition: all 0.2s;
            visibility: hidden; /* Controlled by JS */
        }

        .hotspot-button:hover {
            box-shadow: 0 0 20px #ff007f, 0 0 5px white;
            transform: scale(1.2);
        }

        /* Info Modal Styling */
        #info-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 400px;
            background-color: rgba(0, 0, 0, 0.95);
            border: 2px solid #ff007f;
            border-radius: 12px;
            padding: 20px;
            color: white;
            z-index: 100;
            box-shadow: 0 0 30px rgba(255, 0, 127, 0.5);
            display: none; /* Initially hidden */
            flex-direction: column;
        }

        .modal-title {
            color: #fce4ec;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
    </style>
    <!-- Load Model Viewer Library -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
</head>
<body>

    <!-- Control Button -->
    <div class="mb-4">
        <button id="switchModelBtn" class="px-8 py-3 bg-fuchsia-600 hover:bg-fuchsia-700 text-white font-bold rounded-lg shadow-lg transition duration-300 transform hover:scale-105">
            Switch to Exploded View
        </button>
    </div>

    <!-- Model Viewer Component -->
    <model-viewer 
        id="productViewer"
        src="pink futuristic real.glb" 
        alt="Pink Futuristic Product"
        camera-controls 
        touch-action="pan-y" 
        shadow-intensity="1"
        exposure="1.5"
        environment-image="neutral"
        ar-modes="webxr scene-viewer quick-look"
    >
        <!-- Hotspot 1: Power Core -->
        <!-- *** ADJUST data-position TO MATCH YOUR MODEL *** -->
        <button 
            slot="hotspot-1" 
            class="hotspot-button" 
            data-position="2 5 0" 
            data-normal="0 1 0"
            data-info-title="Power Core"
            data-info-body="This proprietary pink crystal fuels the entire device, providing sustainable, high-density energy."
            onclick="showInfo('hotspot-1')"
        ></button>

        <!-- Hotspot 2: Thermal Regulator -->
        <!-- *** ADJUST data-position TO MATCH YOUR MODEL *** -->
        <button 
            slot="hotspot-2" 
            class="hotspot-button" 
            data-position="-4 0 -3" 
            data-normal="-1 0 0"
            data-info-title="Thermal Regulator"
            data-info-body="Maintains optimal operating temperature using an advanced liquid cooling system for zero thermal throttling."
            onclick="showInfo('hotspot-2')"
        ></button>

        <!-- Hotspot 3: Holographic Projector -->
        <!-- *** ADJUST data-position TO MATCH YOUR MODEL *** -->
        <button 
            slot="hotspot-3" 
            class="hotspot-button" 
            data-position="0 -3 4" 
            data-normal="0 0 1"
            data-info-title="Holographic Projector"
            data-info-body="Generates the 3D user interface display. Utilizes ultra-low latency photon emitters for crisp visuals."
            onclick="showInfo('hotspot-3')"
        ></button>

    </model-viewer>

    <!-- Custom Info Modal -->
    <div id="info-modal">
        <div class="modal-title" id="modal-title"></div>
        <div id="modal-body" class="mb-4 text-gray-300"></div>
        <button onclick="document.getElementById('info-modal').style.display='none';" 
                class="px-4 py-2 bg-pink-700 hover:bg-pink-800 rounded-md font-semibold transition">
            Close
        </button>
    </div>
    
    <script>
        const viewer = document.getElementById('productViewer');
        const switchModelBtn = document.getElementById('switchModelBtn');
        const hotspotButtons = document.querySelectorAll('.hotspot-button');
        
        const MODEL_URLS = {
            REAL: 'pink futuristic real.glb',
            EXPLODED: 'Exploaded pink.glb'
        };
        
        let isExplodedView = false;

        /**
         * Shows the custom information modal with content from the clicked hotspot.
         * @param {string} slotName - The slot ID of the clicked hotspot.
         */
        window.showInfo = (slotName) => {
            const hotspot = document.querySelector(`[slot="${slotName}"]`);
            const modal = document.getElementById('info-modal');
            
            if (hotspot) {
                document.getElementById('modal-title').textContent = hotspot.getAttribute('data-info-title');
                document.getElementById('modal-body').textContent = hotspot.getAttribute('data-info-body');
                modal.style.display = 'flex';
            }
        };

        /**
         * Updates the visibility of the hotspots based on the current view state.
         * Hotspots should only be visible in the exploded view.
         */
        function updateHotspotVisibility(show) {
            hotspotButtons.forEach(button => {
                // Using 'visibility' instead of 'display' keeps the element in the DOM
                // so Model Viewer can continue calculating its 2D position.
                button.style.visibility = show ? 'visible' : 'hidden';
            });
            // Hide the info modal when switching views
            document.getElementById('info-modal').style.display = 'none';
        }

        /**
         * Switches the model viewer source and updates the UI state.
         */
        switchModelBtn.addEventListener('click', () => {
            isExplodedView = !isExplodedView;
            
            if (isExplodedView) {
                viewer.src = MODEL_URLS.EXPLODED;
                switchModelBtn.textContent = 'Switch to Real View';
                // Hotspots become visible when the exploded model is loaded
                updateHotspotVisibility(true);
            } else {
                viewer.src = MODEL_URLS.REAL;
                switchModelBtn.textContent = 'Switch to Exploded View';
                // Hide hotspots when returning to the assembled view
                updateHotspotVisibility(false);
            }

            // Optional: Reset camera view when model changes
            viewer.cameraOrbit = '0deg 75deg 10m';
        });

        // Initial setup: Ensure hotspots are hidden when the page loads with the REAL model
        window.addEventListener('load', () => {
            updateHotspotVisibility(false);
        });

    </script>

</body>
</html>

