<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Test</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
</head>
<body>
    <h1>Car Color Test</h1>
    
    <!-- Test with a known working model first -->
    <model-viewer
        id="car"
        src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
        camera-controls
        style="width: 100%; height: 400px; background-color: #eee;">
    </model-viewer>

    <div style="margin: 20px 0;">
        <button onclick="changeModel('astra sedan.glb')">Astra Car (currently shows red)</button>
        <button onclick="changeModel('blue sedan.glb')">Blue Car</button>
        <button onclick="changeModel('red sedan.glb')">Red Car</button>
    </div>

    <div style="margin: 10px 0;">
        <strong>File Check:</strong><br>
        <button onclick="checkFile('astra sedan.glb')">Check if astra sedan.glb exists</button><br>
        <button onclick="checkFile('blue sedan.glb')">Check if blue sedan.glb exists</button><br>
        <button onclick="checkFile('red sedan.glb')">Check if red sedan.glb exists</button>
    </div>

    <div id="info" style="background: #f0f0f0; padding: 10px; margin: 10px 0;">
        Current model: Loading...
    </div>

    <script>
        const viewer = document.getElementById('car');
        const info = document.getElementById('info');

        function changeModel(modelPath) {
            console.log('Changing to:', modelPath);
            info.textContent = 'Loading: ' + modelPath;
            viewer.src = modelPath;
        }

        function checkFile(filename) {
            fetch(filename)
                .then(response => {
                    if (response.ok) {
                        console.log('✅ File exists:', filename, 'Size:', response.headers.get('content-length'), 'bytes');
                        info.textContent = '✅ ' + filename + ' exists and is accessible';
                    } else {
                        console.error('❌ File not found:', filename, 'Status:', response.status);
                        info.textContent = '❌ ' + filename + ' not found (Status: ' + response.status + ')';
                    }
                })
                .catch(error => {
                    console.error('❌ Error checking file:', filename, error);
                    info.textContent = '❌ Error checking ' + filename + ': ' + error.message;
                });
        }

        viewer.addEventListener('load', () => {
            console.log('✅ Model loaded:', viewer.src);
            info.textContent = 'Loaded: ' + viewer.src;
        });

        viewer.addEventListener('error', (e) => {
            console.error('❌ Failed to load:', viewer.src);
            info.textContent = 'ERROR loading: ' + viewer.src;
        });

        // Check initial model
        viewer.addEventListener('load', () => {
            info.textContent = 'Initial model loaded: ' + viewer.src;
        }, { once: true });
    </script>
</body>
</html>
